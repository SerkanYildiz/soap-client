<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Basic Usage - SOAP Client Docs</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Basic Usage";
    var mkdocs_page_input_path = "usage.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> SOAP Client Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../client/">Creating your custom client</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../events/">Hooking in with events</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../handlers/">Use your preferred data transfer layer with Handlers</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../middlewares/">Get control of the HTTP layer with middlewares</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../testing/">Testing</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../type-converter/">Convert SOAP types</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Basic Usage</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#basic-usage">Basic Usage</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../wsdl-providers/">Get in control of the WSDL file</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Cli</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../cli/generate-classmap/">Generating class maps</a>
                </li>
                <li class="">
                    
    <a class="" href="../cli/generate-client/">Generating clients</a>
                </li>
                <li class="">
                    
    <a class="" href="../cli/generate-clientfactory/">Generate a base client factory</a>
                </li>
                <li class="">
                    
    <a class="" href="../cli/generate-types/">Generating Value-objects</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Code generation</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../code-generation/assemblers/">Code assemblers</a>
                </li>
                <li class="">
                    
    <a class="" href="../code-generation/configuration/">Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../code-generation/rules/">Code generation rules</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Plugins</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../plugins/caching/">Caching plugin</a>
                </li>
                <li class="">
                    
    <a class="" href="../plugins/logger/">Logger plugin</a>
                </li>
                <li class="">
                    
    <a class="" href="../plugins/validator/">Validator plugin</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">SOAP Client Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Basic Usage</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="basic-usage">Basic Usage</h1>
<p>Now that we explained all parts of your new SoapClient, it is time to interact with it.
 Look at following snippet:</p>
<pre><code class="php">$wsdl = 'http://path.to/your.wsdl';
$clientFactory = new ClientFactory(YourClient::class);
$soapOptions = [
    'cache_wsdl' =&gt; WSDL_CACHE_NONE
];

$clientBuilder = new ClientBuilder($clientFactory, $wsdl, $soapOptions);
$clientBuilder-&gt;withLogger(new Logger());
$clientBuilder-&gt;withEventDispatcher(new EventDispatcher());
$clientBuilder-&gt;addClassMap(new ClassMap('WsdlType', PhpType::class));
$clientBuilder-&gt;addTypeConverter(new DateTimeTypeConverter());
$client = $clientBuilder-&gt;build();

$response = $client-&gt;helloWorld(new HelloWorldRequest('name'));
echo $response-&gt;getGreeting();
</code></pre>

<p><sub>Note: The <code>Logger</code> class is not provided by this package, use any PSR-3 compatible logger here (i.e. monolog).</sub></p>
<p>In the first part of the snippet you can see the global configuration of your own SOAP client.
 The <code>YourClient</code> class will be instantiated by a <code>ClientFactory</code>, which is responsible for injecting the client dependencies.
 It is possible to use the same Client with different WSDL endpoints and SOAP options.
 This makes it easy for changing between environments.</p>
<p>Next, the client will be configured by the <code>ClientBuilder</code>.
 As you can see it is possible to add a Logger, EventDispatcher, Classmaps and TypeConverters.
 This makes the Soap client fully configurable.</p>
<p>In the last part of the snippet you can see how the client works.
 It will use the generated value-objects to call the <code>RequestInterface</code> on the SoapClient.
 As a result the <code>ResultProviderInterface</code> will return the actual <code>ResultInterface</code> which contains the <code>getGreeting()</code> method.
 Readable, right?</p>
<p>A client implements a single WSDL, so when the service you are implementing has multiple WSDL's then you'll need to create a client for each of the WSDL's you want to use.
 You can then manually create a wrapper class if you desire to do so.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../wsdl-providers/" class="btn btn-neutral float-right" title="Get in control of the WSDL file">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../type-converter/" class="btn btn-neutral" title="Convert SOAP types"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../type-converter/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../wsdl-providers/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
